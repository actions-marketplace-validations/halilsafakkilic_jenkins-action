name: 'Run Jenkins Job and get build result'
description: 'Triggers Jenkins Job and get build result'
author: 'HSK'

inputs:
  jenkins_url:
    description: 'Jenkins server URL.'

  jenkins_user:
    description: 'Jenkins username.'

  jenkins_token:
    description: 'Jenkins token generated by user.'

  job_name:
    description: 'Jenkins job to triggered and follow up.'

  job_params:
    description: 'Jenkins build job parameters.'
    required: false

  job_timeout:
    description: 'Jenkins job timeout period. (Default: 60 seconds)'
    required: false
    default: '60'

  async:
    description: 'Set to true if you want to just trigger the job without waiting for it to finish. (Default: false)'
    required: false
    default: false

  debug:
    description: 'Set to true if you want to show errors detail.'
    required: false
    default: false

outputs:
  build_id:
    description: 'Jenkins Build Id'

  console:
    description: 'Jenkins Console (only populated if JOB_CONSOLE=false) '

runs:
  using: 'docker'
  image: 'Dockerfile'

branding:
  icon: 'check-circle'
  color: 'green'
